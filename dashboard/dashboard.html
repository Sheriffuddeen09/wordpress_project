<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
</head>
<body>
    <div class="my-10 flex w-72 sm:w-full sm:justify-center rounded-lg mx-auto gap-3">
        <a href="dashboardpage.html">
            <button class='bg-pink-200 p-2 sm:w-28 w-32 rounded flex items-center gap-2 font-bold text-sm text-pink-700 justify-center'>
                <img src="dashboard/image/Vector (3).png" alt="logo" class="h-4 w-4"/>
                <p>Profile</p>
                
            </button>
        </a>
        <a href="cartpage.html">
            <button class='bg-pink-200 p-2 w-36 rounded flex items-center gap-2 font-bold text-sm text-pink-700 justify-center'>
                <img src="dashboard/image/Vector (4).png" alt="Wishlist" class='h-4 w-4'> 
                <p>My Wishlist</p>
            </button>
        </a>
        <a href="orderpage.html" class="hidden sm:block">
            <button class='bg-pink-200 p-2 w-40 rounded flex items-center gap-2 font-bold text-sm text-pink-700 justify-center'>
                <img src="dashboard/image/Vector (5).png" alt="Order History" class='h-4 w-4'> 
                <p>Order History</p>
            </button>
        </a>
        <a href="contactpage.html">
            <button class='bg-pink-200 p-2 sm:w-36 w-40 rounded flex items-center gap-2 font-bold text-sm text-pink-700 justify-center'>
                <img src="dashboard/image/Vector (6).png" alt="Help Center" class='h-4 w-4'> 
                <p>Help Center</p>
            </button>
        </a>
        <button onclick="handleLogout()" class='bg-pink-200 py-2 px-6 sm:px-2 w-40 rounded flex items-center gap-2 font-bold text-sm text-pink-700 justify-center'>
            <img src="dashboard/image/Vector (7).png" alt="Logout" class='h-4 w-4'> 
            <p>Log Out</p>
        </button>
    </div>
    
    <div class="mb-10 flex gap-4 flex-wrap justify-center">
        <div class="flex justify-center mt-10 max-w-sm w-96 bg-blue-200 flex-col items-center" style="background-image: url('/dashboard/image/Untitled-design.png');">
            <div id="user-profile" class="mt-4"></div>
            <a href="profilepage.html" class="text-black mt-4 font-bold text-sm hover:text-blue-500 cursor-pointer">Edit</a>
        </div>
        
        <div class="flex flex-col gap-2">
            <a href="notificationpage.html">
                <div class="bg-green-100 sm:w-80 w-72 rounded p-4 border border-blue-200">
                    <div class="inline-flex items-center gap-3">
                        <img src="dashboard/image/Vector (9).png" alt="Notification" class='h-4 w-3'>
                        <p class="font-bold text-sm">Settings</p>
                    </div>
                    <p class="text-sm font-bold my-2">Notification</p>
                    <p class="text-xs w-64">We send SMS messages for booking-related notifications. Select the notifications you want to receive.</p>
                </div>
            </a>
            <div class="bg-green-100 sm:w-80 w-72 rounded px-4 py-2 border border-blue-200">
                <div class="inline-flex items-center gap-3">
                    <img src="dashboard/image/Pets--Streamline-Rounded-Material 1.png" alt="Pets" class='h-4 w-3'>
                    <p class="font-bold text-sm">Pets</p>
                </div>
                <p class="text-sm my-2 font-bold">Tell Us About Your Pets</p>
                <p class="text-xs w-64 sm:w-72">Share details about your pets to help us provide the perfect rental experience. Add them one by one to ensure we understand their unique needs.</p>
                <a href='shoppage.html'><p class="text-pink-700 text-sm">View Pets</p></a>
            </div>
            <div class="bg-green-100 sm:w-80 w-72 rounded px-4 py-2 border border-blue-200">
                <a href="paymentpage.html">
                    <div class="inline-flex items-center gap-3">
                        <img src="dashboard/image/Vector (8).png" alt="Payment" class='h-4 w-3'>
                        <p class="font-bold text-sm">Payment Methods</p>
                    </div>
                    <p class="text-xs w-64">We offer secure and convenient payment options for a hassle-free experience.</p>
                    <div class="mt-4 mb-2 flex justify-around">
                        <img src="dashboard/image/Frame 144.png" alt="Payment1" class='h-8 w-16'>
                        <img src="dashboard/image/download (3) 1.png" alt="Payment2" class='h-6 w-16'>
                        <img src="dashboard/image/Frame 146.png" alt="Payment3" class='h-6 w-16'>
                    </div>
                </a>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", () => {
    const userProfileContainer = document.getElementById("user-profile");
    // Fetch User Profile
    const fetchUser = async () => {
    try {
        const response = await fetch("http://localhost/mywebsite/function/user_profile.php", {
            credentials: "include" // Ensure cookies are sent with the request
        });
        const data = await response.json();

        if (data.success && data.user) {
            const user = data.user;
            document.getElementById("user-profile").innerHTML = `
                <div class="profile-container">
                    <img src="${user.profile_image}" alt="Profile Image" class="profile-img">
                    <h2>${user.firstname} ${user.lastname}</h2>
                    <p>Email: ${user.email}</p>
                    <p>Phone: ${user.phone}</p>
                </div>
            `;
        } else {
            document.getElementById("user-profile").innerHTML = `<p>${data.error}</p>`;
        }
    } catch (error) {
        console.error("Error fetching user data:", error);
    }
};
    
    // Logout Function
    window.handleLogout = async () => {
        try {
            const response = await fetch("http://localhost/mywebsite/function/user_profile.php?logout=true");
            const data = await response.json();
            if (data.success) {
                alert("Logged out successfully!");
                window.location.href = "/login";
            }
        } catch (error) {
            console.error("Logout failed:", error);
        }
    };

    fetchUser();
});
    </script>
</body>
</html>
